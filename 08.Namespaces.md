# 8. Namespace <!-- omit in toc -->

> [Documentación Oficial](https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/)

# 1. Listar los NS y recursos
```vim
kubectl get namespaces

# usando alias
kubectl get ns

kubectl get pods -n kube-system

```
> kube-system es el NS donde se instalan los objetos Kubernetes de sistema.

## 1.1. Listar los contextos y namespace configurados
```
kubectl config get-contexts

cat ~/.kube/config
```
> Validar: Cluster - context - user

# 2. Crear un nuevo namespace con el archivo ns.yaml
```yaml
apiVersion: v1
kind: Namespace
metadata:
  name: dev
```

> Opcional: kubectl create namespace dev

## Aplicar el yaml
```
kubectl apply -f ns.yaml

k get ns
```

# 3. Crear un Pod en el NS dev
```vim
kubectl run redis-pod --image=redis -n dev
```
Si definimos el Pod mediante un YAML:
```yaml
metadata:
  namespace: dev
```
# 4. Listar los Pods del NS dev
```vim
kubectl get pods

```
> No resources found in default namespace.

## 4.1. Pods ns dev
```
kubectl get pods -n dev
```

En caso de requerir llamar un servicio dev desde otro NS
> ***servicio***.***dev***.svc.cluster.local

# 5. Listar todos los objetos del cluster:
```vim
kubectl get all --all-namespaces

# alias -A
kubectl get all -A
```
# 6. Cambiar el namespace
```vim
kubectl config set-context --current --namespace=dev

kubectl get pods
```

# 7. Comprobar configuración
```vim
cat ~/.kube/config
```

> Validar - context namespace

```
kubectl config get-contexts
```
> Validar - columna namespace


# 8. Tools
[kubectx+kubens](https://github.com/ahmetb/kubectx)

## 8.1. Instalar
> [Info](https://github.com/ahmetb/kubectx#manual-installation-macos-and-linux)

```vim
sudo git clone https://github.com/ahmetb/kubectx /opt/kubectx
sudo ln -s /opt/kubectx/kubectx /usr/local/bin/kubectx
sudo ln -s /opt/kubectx/kubens /usr/local/bin/kubens
```

## 8.2. Listar contextos y namespaces
```
kubectx

kubens

kubens default

kubectl config get-contexts
```

# 9. Limpiar
```k
kubectl delete all --all
```
